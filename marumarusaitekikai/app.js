const TOPICS = [
    // --- 元のお題 ---
    "無人島に一つだけ持っていくなら？",
    "魔法が一つだけ使えるなら、どんな魔法？",
    "100万円もらったら何に使う？",
    "一日だけ誰か（何か）に入れ替わるなら？",
    "ドラえもんの道具で一番欲しいものは？",
    "タイムマシンがあったら、なにをする？",
    "動物と話せるようになったら、何を聞く？",
    "空を飛べたら、どこに行きたい？",
    "将来、ユーチューバーになるならどんな動画を作る？",
    "自分が総理大臣になったら、どんなルールを作る？",
    "宇宙人に会ったら、最初のひとことは？",
    "明日、地球がなくなるとしたら、最後に何を食べる？",
    "自分の家にお手伝いロボットが来たら、何を頼む？",
    "宝くじが当たったら、何に使う？",
    "映画の主人公になれるなら、どんな映画がいい？",
    "自分の銅像を作るなら、どんなポーズ？",
    "ひとつだけ超能力が持てるなら何がいい？",
    "お弁当に入っていたら一番うれしいおかずは？",
    "給食のメニューで一番好きなものは？",
    "一生、一種類のアイスしか食べられないなら何味？",
    "おにぎりの具、最強なのは？",
    "ラーメンに入れたいトッピングは？",
    "好きなお菓子の種類は？（チョコ、スナック、グミなど）",
    "お寿司のネタ、最初に食べるなら何？",
    "好きな色は？",
    "一番好きな季節は？",
    "動物園で一番見たい動物は？",
    "水族館で一番見たい生き物は？",
    "好きな教科は？",
    "好きな給食のデザートは？",
    "家の中で一番落ち着く場所は？",
    "好きなスポーツは？",
    "遊園地で絶対乗りたい乗り物は？",
    "好きな曜日は？",
    "目玉焼きには何をかける？（しょうゆ、ソース、塩など）",
    "今の自分に足りないものは？",
    "夏休みの宿題、最後まで残ってしまうものは？",
    "先生に怒られないための、いい言い訳は？",
    "休み時間に何をして遊ぶのが好き？",
    "遠足のおやつ、絶対に外せないものは？",
    "掃除の時間、一番楽な係は？",
    "運動会で一番やりたい種目は？",
    "ランドセルの色、今選び直せるなら何色にする？",
    "テストで100点を取ったときのご褒美、何がいい？",
    "日曜日の夜に思うことは？",
    "授業中、眠くなったときの対処法は？",
    "図書室で借りたい本のジャンルは？",
    "放課後、一番したいことは？",
    "クラスで一番人気者になれる特技は？",
    "誕生日に一番欲しいものは？",
    "言われて一番うれしい言葉は？",
    "自分の性格を一言で言うと？",
    "友達とケンカしたとき、仲直りするにはどうする？",
    "怖いもの、一番苦手なものは？",
    "「かっこいい」ってどんな人？",
    "「やさしい」ってどんな人？",
    "泣いている友達になんて声をかける？",
    "お母さん（お父さん）を怒らせない方法は？",
    "家族にしてあげたいことは？",
    "最近、一番笑ったことは？",
    "最近、ちょっと怒ったことは？",
    "寝る前に必ずすることは？",
    "嫌いな野菜をおいしく食べる方法は？",
    "サンタクロースにお願いしたいことは？",
    "もらってもちょっと困るプレゼントは？",
    "「これだけは誰にも負けない！」と思うことは？",
    "無くしたら一番困るものは？",
    "10年後の自分に一言かけるなら？",
    "部屋にひとつだけ、変なものを置くなら？",

    // --- 追加された新しいお題 ---
    "雲に乗れたら、どんな形の雲に乗ってどこに行きたい？",
    "動物に一つだけ人間の言葉を教えるなら、どの動物にどんな言葉を教える？",
    "お菓子の家に住めるなら、屋根・壁・ドアはそれぞれ何のお菓子で作る？",
    "恐竜の時代に行けたら、恐竜と一緒にどんな遊びをしたい？",
    "自分の考えた最強のモンスター、どんなすごい特技を持ってる？",
    "海の中で息ができるようになったら、海の底で何をして過ごす？",
    "魔法のじゅうたんを手に入れたら、友達を乗せてどんな景色を見に行きたい？",
    "宇宙旅行に行けるなら、新しい星を見つけてどんな名前をつける？",
    "自分の体がアリのサイズになったら、家の中でどうやって冒険する？",
    "おばけに会ったら、どうやって仲良くなる作戦を立てる？",
    "絵本の世界に入れるなら、どの登場人物になってどんなことをしたい？",
    "一日だけ大人の姿になれるなら、こっそり何をやってみたい？",
    "もしも世界中の時計が止まったら、その間に何をして遊ぶ？",
    "空から降ってきてほしいものは、雨や雪以外なら何？",
    "もしも自分がロボットを作れるなら、どんなお手伝いをしてくれるロボットにする？",
    "カレーの具で、一番意外だけど入れてみたら美味しそうなものは何？",
    "かき氷のシロップ、今までになかった新しい味を発明するならどんな味？",
    "朝ごはんに毎日違うものを食べられるなら、明日は何を食べたい？",
    "オリジナルの最強パフェを作るなら、一番上に何を乗せる？",
    "お祭りに行ったら、自分でお店を出すならどんな屋台をやりたい？",
    "自動販売機でジュース以外のものが出てくるとしたら、何が出てきてほしい？",
    "お弁当箱を開けてびっくり！中に入っていたありえないおかずは何？",
    "給食のメニューを一つだけ自分が決められるなら、どんな特別なメニューにする？",
    "新しい鬼ごっこを考えるなら、どんなルールを追加して面白くする？",
    "かくれんぼで、絶対に誰にも見つからない最強の隠れ場所はどこ？",
    "友達と一日中遊べるなら、どんな計画を立ててどこに行く？",
    "体育の時間に、新しく作ってみたいスポーツはどんなもの？",
    "秘密基地を作るなら、中にはどんなアイテムを置きたい？",
    "しりとりで、「ん」がついても負けにならない新しいルールを作るなら？",
    "黒板係や生き物係のほかに、クラスにあったら面白そうな新しい係は何？",
    "校長先生にひとつだけお願いをして学校を楽しくするなら、何を提案する？",
    "学校の中で、自分だけが知っているお気に入りの場所とその理由は？",
    "もしも自分が一日だけ先生になったら、どんな面白い授業をする？",
    "夏休みの自由研究、お金をいくらでも使えるならどんな大実験をする？",
    "運動会のリレーで、バトンの代わりに何を渡して走ったら面白い？",
    "学校の七不思議、自分たちで8つ目を作るならどんな不思議なお話にする？",
    "筆箱の中に、えんぴつや消しゴム以外でこっそり入れておきたいものは？",
    "図書室にある本が全部自分の好きな本に変わるなら、どんな本でいっぱいにする？",
    "クラスのみんなで大きな絵を描くなら、どんなテーマで描きたい？",
    "休み時間に教室でできる、新しいボードゲームを考えるならどんなゲーム？",
    "タイピングゲームで、一番最初に出てきたら面白そうなお題の言葉は何？",
    "学校のチャイムの音を好きな音楽に変えられるなら、どんな曲にする？",
    "遠足の行き先を自分で決められるなら、どんな場所で何をして遊ぶ？",
    "もしも教室の机が空を飛んだら、そのままどこへ飛んでいきたい？",
    "今までで一番楽しかった旅行や遠出で、何が一番の思い出に残っている？",
    "お風呂の中で、つい考えてしまうことや歌ってしまう歌は何？",
    "自転車で行ける一番遠い場所を探検するなら、何を持っていく？",
    "寝坊した！家を出るまであと5分、どうやってピンチを乗り切る？",
    "今、一番集めたい（または集めている）ものはなに？どうしてそれが好きなの？",
    "お小遣いをもらったら、自分のためじゃなく誰かのためにどう使う？",
    "自分が天才かも？と思った瞬間は、どんなことができたとき？",
    "大人になったら、どんな仕事をして周りの人を喜ばせたい？",
    "お父さんやお母さんのすごいなと思うところは、具体的にどんなところ？",
    "ペットを何でも飼えるなら、どんな動物を飼ってどんな名前をつける？",
    "自分の住んでいる街のいいところを、知らない人に紹介するなら何て言う？",
    "最近見たちょっとうれしかった夢は、どんなお話だった？",
    "自転車に初めて乗れたときのような、最近「できた！」と思ったことは？",
    "どうしても直したい自分のクセは、どんなときにやってしまう？",
    "「大人になったなあ」と感じるのは、どんな行動ができたとき？",
    "タイムカプセルを10年後に開けるために埋めるなら、何を入れる？",
    "流れ星にお願いをするなら、どんな長めのお願いごとをする？",
    "四葉のクローバーを見つけたら、誰にあげてどんな言葉をかける？",
    "もしも自分が犬になったら、まずどこに走っていって何をする？",
    "「幸せだなあ」って、日常のどんな瞬間に感じる？",
    "友達が落ち込んでいるとき、どんな方法で元気づけてあげる？",
    "今まで読んだ本の中で、主人公になってみたいと思ったのはどの本？",
    "もしも自分が総理大臣になったら、子供が喜ぶどんな法律を作る？",
    "一日だけユーチューバーになれるなら、どんな企画の動画を撮影する？",
    "サンタクロースに、プレゼント以外のことをお願いするなら何と言う？",
    "自分の性格を動物に例えるなら、何の動物でその理由は何？"
];

// 画面切り替え管理
function navigate(screenName) {
    const screens = ['home', 'rule', 'topic'];
    screens.forEach(s => {
        const el = document.getElementById(`screen-${s}`);
        if (el) {
            if (s === screenName) {
                el.classList.remove('hidden');
                el.classList.add('flex');
            } else {
                el.classList.add('hidden');
                el.classList.remove('flex');
            }
        }
    });

    // お題画面に入った時の特別処理
    if (screenName === 'topic') {
        const titleEl = document.getElementById('topic-text');
        if (titleEl.innerText === 'スタート！') {
            startRoulette();
        }
    }
}

// ルーレットのロジック
let isSpinning = false;
let rouletteInterval = null;

function startRoulette() {
    if (isSpinning) return;
    isSpinning = true;

    const topicText = document.getElementById('topic-text');
    const sparkles = document.getElementById('sparkles');
    const drawBtn = document.getElementById('btn-draw-topic');
    const drawIcon = document.getElementById('icon-refresh');

    // リセット
    topicText.classList.remove('animate-pop-in');
    sparkles.classList.add('hidden');
    drawIcon.classList.add('animate-spin');
    drawBtn.disabled = true;
    drawBtn.classList.add('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
    drawBtn.classList.remove('bg-pink-500', 'hover:bg-pink-600', 'hover:scale-105', 'active:scale-95', 'border-b-4', 'border-pink-700');

    let counter = 0;
    const maxCount = 20; // 20回切り替えで止まる
    const speed = 50;

    rouletteInterval = setInterval(() => {
        const randomIndex = Math.floor(Math.random() * TOPICS.length);
        topicText.innerText = TOPICS[randomIndex];
        counter++;

        if (counter >= maxCount) {
            clearInterval(rouletteInterval);
            finalizeTopic();
        }
    }, speed);
}

function finalizeTopic() {
    isSpinning = false;

    // 最終決定のお題
    const finalIndex = Math.floor(Math.random() * TOPICS.length);
    const topicText = document.getElementById('topic-text');
    topicText.innerText = TOPICS[finalIndex];

    // エフェクトとボタンの復元
    topicText.classList.add('animate-pop-in');
    const sparkles = document.getElementById('sparkles');
    sparkles.classList.remove('hidden');

    const drawBtn = document.getElementById('btn-draw-topic');
    const drawIcon = document.getElementById('icon-refresh');

    drawIcon.classList.remove('animate-spin');
    drawBtn.disabled = false;
    drawBtn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
    drawBtn.classList.add('bg-pink-500', 'hover:bg-pink-600', 'hover:scale-105', 'active:scale-95', 'border-b-4', 'border-pink-700');
}
